(library
 (name dune_lwd)
 (modules lwd lwd_seq lwd_table lwd_infix lwd_utils)
 (libraries seq)
 (wrapped false)
 (preprocess
  (per_module
   ; use full to path to pp.exe to work around
   ; https://github.com/ocaml/dune/issues/6106
   ((action
     (run vendor/lwd/lwd/pp.exe %{input-file}))
    lwd_infix
    lwd_seq))))

(executable
 (name pp)
 (modules pp))
